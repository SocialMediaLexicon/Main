{% extends "social_app/base.html" %}

{% block title %}User profile{% endblock %}

{% block content %}
<br><br><br>
<div class="col-md-8 m-auto">

    <div class="content-section">
        
        <div class="account-img-container">
            <div class="img-cont">
                <img class="rounded-circle account-img mx-auto d-block" src="{{object.profile_pic.url}}" alt="image" width="200" height="200">
                
            </div>
        </div>
        
		<hr tyle="height:3px;border-width:0;color:gray;background-color:gray">

        <div class="card-body">
            
            <h4 class="card-title text-center">{{object.user.first_name}} {{object.user.last_name}} [{{object.user.username}}]</h4>

			<div class="d-flex flex-row bd-highlight mb-3 justify-content-center">
                <a href="{% url 'users:all_profiles' %}" class="btn btn-success d-flex mb-3 justify-content" style="margin-right: 4px">See all Profiles</a>
                <a href="{% url 'login' %}" class="btn btn-success d-flex mb-3 justify-content">Go Back Home</a>
            </div>


 		<div class="text-center">
            {% if object.user != user %}
                {% if follow %}
                    <form action="{% url 'users:follow-unfollow' %}" method='POST'>
                        {% csrf_token %}
                        <input type="hidden" name="profile_id" value={{object.id}}>
                        <button type="submit" class="btn btn-info mb-2 w-40">Unfollow</button>
                    </form>
                {% else %}
                    <form action="{% url 'users:follow-unfollow' %}" method='POST'>
                        {% csrf_token %}
                        <input type="hidden" name="profile_id" value={{object.id}}>
                        <button type="submit" class="btn btn-success mb-2 w-40">Follow</button>
                    </form>

                    {% for post in post_list %}
            <div class="card shadow " style="width: 20rem; height: 23rem;" >
                
                <img src="{{ post.photo_url }}" class="card-img-top" alt="..." height="150px" width="150px">
                <div class="card-body" style="overflow:hidden;">
                    <h5><a href="{% url 'users:user_profile_details' post.author.profile.id %}" class="text-success">@{{post.author}}</a></h5>
                    <p class="card-text"><small>{{post.created_on}}</small></p>
                    <h6 class="card-text">{{ post.post_content | truncatechars:50}}</h6>
            
                </div>

            </div>
    {% endfor %} 
                {% endif %}
            {% endif %}

        </div>
        	<hr>


			<div class="m-t-10 p-15 text-center">
				<div class="row">
					<div class="col">
						<span class="h6">Posts</span>
						<p><a class="mr-2" href="#">{{object.profile_posts.count}}</a></p>
					</div>
				
					<div class="col">
						<span class="h6">Followers</span>
						<p style="cursor:pointer; color: blue;" data-contents="{{object.user.following.all}}" data-title="Followers" title="Followers">{{object.user.following.count}}</p>
					</div>
					<div class="col">
						<span class="h6">Following</span>
						<p style="cursor:pointer; color: blue;"  data-contents="{{object.user.profile.following.all}}" data-title="Following" title="Following">{{object.user.profile.following.count}}</p>
					</div>
				</div>
			</div>
    	</div>
	</div>
</div>
<br>


<br>




{% endblock %}

{% block script %}


{% endblock %}